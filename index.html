<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Agent Cooperation Hub</title>
    <meta name="description" content="Sistema de gesti贸n para cooperaci贸n entre agentes de IA">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <div class="logo-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3" />
                        <path
                            d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83" />
                    </svg>
                </div>
                <span class="logo-text">AgentHub</span>
            </div>

            <nav class="nav-menu">
                <a href="#" class="nav-item active" data-section="dashboard">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7" rx="1" />
                        <rect x="14" y="3" width="7" height="7" rx="1" />
                        <rect x="3" y="14" width="7" height="7" rx="1" />
                        <rect x="14" y="14" width="7" height="7" rx="1" />
                    </svg>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-section="tasks">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 11l3 3L22 4" />
                        <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11" />
                    </svg>
                    <span>Tareas</span>
                </a>
                <a href="#" class="nav-item" data-section="handoffs">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 1l4 4-4 4" />
                        <path d="M3 11V9a4 4 0 014-4h14" />
                        <path d="M7 23l-4-4 4-4" />
                        <path d="M21 13v2a4 4 0 01-4 4H3" />
                    </svg>
                    <span>Handoffs</span>
                </a>
                <a href="#" class="nav-item" data-section="activity">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="22,12 18,12 15,21 9,3 6,12 2,12" />
                    </svg>
                    <span>Actividad</span>
                </a>
                <a href="#" class="nav-item" data-section="chat">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" />
                    </svg>
                    <span>Chat IA</span>
                </a>
                <a href="#" class="nav-item" data-section="settings">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3" />
                        <path
                            d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" />
                    </svg>
                    <span>Configuraci贸n</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="agent-status">
                    <div class="agent-badge orquestador">
                        <span class="status-dot"></span>
                        <span>Orquestador</span>
                    </div>
                    <div class="agent-badge implementador">
                        <span class="status-dot"></span>
                        <span>Implementador</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <h1 class="page-title">Dashboard</h1>
                    <p class="page-subtitle">Sistema de Cooperaci贸n Multi-Agente</p>
                </div>
                <div class="header-right">
                    <button class="btn btn-ghost" onclick="toggleTheme()" title="Cambiar tema">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" />
                        </svg>
                    </button>
                    <button class="btn btn-primary" id="newTaskBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19" />
                            <line x1="5" y1="12" x2="19" y2="12" />
                        </svg>
                        Nueva Tarea
                    </button>
                </div>
            </header>

            <!-- Dashboard Section -->
            <section class="section dashboard-section active" id="dashboard">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon pending">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10" />
                                <polyline points="12,6 12,12 16,14" />
                            </svg>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="pendingCount">0</span>
                            <span class="stat-label">Pendientes</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon progress">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path
                                    d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83" />
                            </svg>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="progressCount">0</span>
                            <span class="stat-label">En Progreso</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon completed">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 11-5.93-9.14" />
                                <polyline points="22,4 12,14.01 9,11.01" />
                            </svg>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="completedCount">0</span>
                            <span class="stat-label">Completadas</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon handoff">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M17 1l4 4-4 4" />
                                <path d="M3 11V9a4 4 0 014-4h14" />
                            </svg>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="handoffCount">0</span>
                            <span class="stat-label">Handoffs</span>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="panel task-board">
                        <div class="panel-header">
                            <h2>Tablero de Tareas</h2>
                        </div>
                        <div class="kanban-board">
                            <div class="kanban-column" id="pendingColumn">
                                <div class="column-header">
                                    <span class="column-title">Pendientes</span>
                                    <span class="column-count">0</span>
                                </div>
                                <div class="column-content"></div>
                            </div>
                            <div class="kanban-column" id="progressColumn">
                                <div class="column-header">
                                    <span class="column-title">En Progreso</span>
                                    <span class="column-count">0</span>
                                </div>
                                <div class="column-content"></div>
                            </div>
                            <div class="kanban-column" id="completedColumn">
                                <div class="column-header">
                                    <span class="column-title">Completadas</span>
                                    <span class="column-count">0</span>
                                </div>
                                <div class="column-content"></div>
                            </div>
                        </div>
                    </div>

                    <div class="panel activity-feed">
                        <div class="panel-header">
                            <h2>Actividad Reciente</h2>
                        </div>
                        <div class="feed-content" id="activityFeed">
                            <div class="empty-state">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="22,12 18,12 15,21 9,3 6,12 2,12" />
                                </svg>
                                <p>Sin actividad reciente</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tasks Section -->
            <section class="section tasks-section" id="tasks">
                <div class="panel">
                    <div class="panel-header">
                        <h2>Gesti贸n de Tareas</h2>
                        <div class="panel-actions">
                            <select id="taskFilter" class="select-input">
                                <option value="all">Todas</option>
                                <option value="pending">Pendientes</option>
                                <option value="in_progress">En Progreso</option>
                                <option value="completed">Completadas</option>
                            </select>
                        </div>
                    </div>
                    <div class="task-list" id="taskList">
                        <div class="empty-state">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 11l3 3L22 4" />
                                <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11" />
                            </svg>
                            <p>No hay tareas creadas</p>
                            <button class="btn btn-secondary" onclick="openNewTaskModal()">Crear primera tarea</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Handoffs Section -->
            <section class="section handoffs-section" id="handoffs">
                <div class="panel">
                    <div class="panel-header">
                        <h2>Historial de Handoffs</h2>
                    </div>
                    <div class="handoff-list" id="handoffList">
                        <div class="empty-state">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M17 1l4 4-4 4" />
                                <path d="M3 11V9a4 4 0 014-4h14" />
                                <path d="M7 23l-4-4 4-4" />
                                <path d="M21 13v2a4 4 0 01-4 4H3" />
                            </svg>
                            <p>No hay handoffs registrados</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Activity Section -->
            <section class="section activity-section" id="activity">
                <div class="panel">
                    <div class="panel-header">
                        <h2>Log de Actividad</h2>
                        <button class="btn btn-ghost" id="refreshActivity">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23,4 23,10 17,10" />
                                <path d="M20.49 15a9 9 0 11-2.12-9.36L23 10" />
                            </svg>
                        </button>
                    </div>
                    <div class="activity-log" id="activityLog">
                        <div class="empty-state">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="22,12 18,12 15,21 9,3 6,12 2,12" />
                            </svg>
                            <p>Sin actividad registrada</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Chat IA Section -->
            <section class="section chat-section" id="chat">
                <div class="chat-container">
                    <div class="chat-sidebar">
                        <div class="chat-agent-selector">
                            <h3>Agente Activo</h3>
                            <div class="agent-selector-buttons">
                                <button class="agent-btn active" data-agent="orquestador"
                                    onclick="selectChatAgent('orquestador')">
                                    <div class="agent-avatar orquestador">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="7" r="4" />
                                            <path d="M5.5 21a8.38 8.38 0 0113 0" />
                                        </svg>
                                    </div>
                                    <span>Orquestador</span>
                                </button>
                                <button class="agent-btn" data-agent="implementador"
                                    onclick="selectChatAgent('implementador')">
                                    <div class="agent-avatar implementador">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M16 18l6-6-6-6" />
                                            <path d="M8 6l-6 6 6 6" />
                                        </svg>
                                    </div>
                                    <span>Implementador</span>
                                </button>
                            </div>
                        </div>
                        <div class="chat-context">
                            <h4>Contexto</h4>
                            <div class="context-item">
                                <span class="context-label">Proveedor:</span>
                                <span class="context-value" id="chatProvider">Ollama</span>
                            </div>
                            <div class="context-item">
                                <span class="context-label">Modelo:</span>
                                <span class="context-value" id="chatModel">llama3.2</span>
                            </div>
                            <div class="context-item">
                                <span class="context-label">Estado:</span>
                                <span class="context-value status-indicator" id="chatStatus">
                                    <span class="status-dot"></span>
                                    Desconectado
                                </span>
                            </div>
                        </div>
                        <button class="btn btn-secondary" onclick="clearChat()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3,6 5,6 21,6" />
                                <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2" />
                            </svg>
                            Limpiar Chat
                        </button>
                    </div>
                    <div class="chat-main">
                        <div class="chat-messages" id="chatMessages">
                            <div class="chat-welcome">
                                <div class="welcome-icon">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" />
                                    </svg>
                                </div>
                                <h3>Chat con Agentes IA</h3>
                                <p>Inicia una conversaci贸n con el agente seleccionado para planificar, revisar c贸digo o
                                    implementar tareas.</p>
                                <div class="welcome-suggestions">
                                    <button class="suggestion-chip"
                                        onclick="sendSuggestion('Analiza el estado actual del proyecto')">
                                         Analizar proyecto
                                    </button>
                                    <button class="suggestion-chip"
                                        onclick="sendSuggestion('驴Qu茅 tareas est谩n pendientes?')">
                                         Ver tareas
                                    </button>
                                    <button class="suggestion-chip"
                                        onclick="sendSuggestion('Ay煤dame a planificar la siguiente feature')">
                                         Planificar
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="chat-input-container">
                            <div class="typing-indicator" id="typingIndicator" style="display: none;">
                                <span></span><span></span><span></span>
                                <span class="typing-text">El agente est谩 escribiendo...</span>
                            </div>
                            <div class="chat-input-wrapper">
                                <textarea id="chatInput" placeholder="Escribe tu mensaje..." rows="1"
                                    onkeydown="handleChatKeydown(event)"></textarea>
                                <button class="send-btn" onclick="sendChatMessage()" id="sendBtn">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="22" y1="2" x2="11" y2="13" />
                                        <polygon points="22,2 15,22 11,13 2,9 22,2" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section class="section settings-section" id="settings">
                <div class="settings-grid">
                    <!-- Agent Configuration -->
                    <div class="panel settings-panel">
                        <div class="panel-header">
                            <h2>Configuraci贸n de Agentes</h2>
                        </div>
                        <div class="settings-content">
                            <div class="setting-group">
                                <div class="setting-header">
                                    <div class="setting-icon orquestador">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="7" r="4" />
                                            <path d="M5.5 21a8.38 8.38 0 0113 0" />
                                        </svg>
                                    </div>
                                    <div class="setting-info">
                                        <h3>Agente Orquestador</h3>
                                        <p>Planificaci贸n, revisi贸n e integraci贸n</p>
                                    </div>
                                    <label class="toggle">
                                        <input type="checkbox" id="orquestadorEnabled" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div class="setting-fields">
                                    <div class="form-group">
                                        <label>Nombre del Agente</label>
                                        <input type="text" id="orquestadorName" class="input"
                                            value="Orquestador Principal">
                                    </div>
                                    <div class="form-group">
                                        <label>Proveedor IA</label>
                                        <select id="orquestadorProvider" class="select-input"
                                            onchange="updateModelList('orquestador')">
                                            <optgroup label="APIs Cloud">
                                                <option value="openai">OpenAI</option>
                                                <option value="anthropic">Anthropic</option>
                                                <option value="google">Google AI</option>
                                                <option value="mistral">Mistral AI</option>
                                                <option value="cohere">Cohere</option>
                                                <option value="groq">Groq</option>
                                            </optgroup>
                                            <optgroup label="Open Source / Local">
                                                <option value="ollama">Ollama (Local)</option>
                                                <option value="lmstudio">LM Studio (Local)</option>
                                                <option value="llamacpp">llama.cpp</option>
                                                <option value="huggingface">Hugging Face</option>
                                            </optgroup>
                                            <optgroup label="Agentes Especializados">
                                                <option value="antigravity" selected>Antigravity</option>
                                                <option value="cursor">Cursor AI</option>
                                                <option value="codeium">Codeium</option>
                                            </optgroup>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Modelo</label>
                                        <select id="orquestadorModel" class="select-input"></select>
                                    </div>
                                </div>
                                <div class="setting-fields" style="margin-top: 12px;">
                                    <div class="form-group">
                                        <label>Especializaci贸n</label>
                                        <select id="orquestadorSpec" class="select-input">
                                            <option value="architect">Arquitectura</option>
                                            <option value="planning">Planificaci贸n</option>
                                            <option value="review">Revisi贸n de C贸digo</option>
                                            <option value="fullstack">Full Stack</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Endpoint (para local)</label>
                                        <input type="text" id="orquestadorEndpoint" class="input"
                                            placeholder="http://localhost:11434">
                                    </div>
                                    <div class="form-group">
                                        <label>Temperatura</label>
                                        <input type="number" id="orquestadorTemp" class="input" value="0.7" min="0"
                                            max="2" step="0.1">
                                    </div>
                                </div>
                            </div>

                            <div class="setting-group">
                                <div class="setting-header">
                                    <div class="setting-icon implementador">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M16 18l6-6-6-6" />
                                            <path d="M8 6l-6 6 6 6" />
                                        </svg>
                                    </div>
                                    <div class="setting-info">
                                        <h3>Agente Implementador</h3>
                                        <p>Codificaci贸n, testing y documentaci贸n</p>
                                    </div>
                                    <label class="toggle">
                                        <input type="checkbox" id="implementadorEnabled" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div class="setting-fields">
                                    <div class="form-group">
                                        <label>Nombre del Agente</label>
                                        <input type="text" id="implementadorName" class="input"
                                            value="Implementador Dev">
                                    </div>
                                    <div class="form-group">
                                        <label>Proveedor IA</label>
                                        <select id="implementadorProvider" class="select-input"
                                            onchange="updateModelList('implementador')">
                                            <optgroup label="APIs Cloud">
                                                <option value="openai">OpenAI</option>
                                                <option value="anthropic">Anthropic</option>
                                                <option value="google">Google AI</option>
                                                <option value="mistral">Mistral AI</option>
                                                <option value="cohere">Cohere</option>
                                                <option value="groq">Groq</option>
                                            </optgroup>
                                            <optgroup label="Open Source / Local">
                                                <option value="ollama">Ollama (Local)</option>
                                                <option value="lmstudio">LM Studio (Local)</option>
                                                <option value="llamacpp">llama.cpp</option>
                                                <option value="huggingface">Hugging Face</option>
                                            </optgroup>
                                            <optgroup label="Agentes Especializados">
                                                <option value="antigravity" selected>Antigravity</option>
                                                <option value="cursor">Cursor AI</option>
                                                <option value="codeium">Codeium</option>
                                            </optgroup>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Modelo</label>
                                        <select id="implementadorModel" class="select-input"></select>
                                    </div>
                                </div>
                                <div class="setting-fields" style="margin-top: 12px;">
                                    <div class="form-group">
                                        <label>Especializaci贸n</label>
                                        <select id="implementadorSpec" class="select-input">
                                            <option value="frontend">Frontend</option>
                                            <option value="backend">Backend</option>
                                            <option value="fullstack" selected>Full Stack</option>
                                            <option value="devops">DevOps</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Endpoint (para local)</label>
                                        <input type="text" id="implementadorEndpoint" class="input"
                                            placeholder="http://localhost:1234">
                                    </div>
                                    <div class="form-group">
                                        <label>Temperatura</label>
                                        <input type="number" id="implementadorTemp" class="input" value="0.3" min="0"
                                            max="2" step="0.1">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- System Settings -->
                    <div class="panel settings-panel">
                        <div class="panel-header">
                            <h2>Configuraci贸n del Sistema</h2>
                        </div>
                        <div class="settings-content">
                            <div class="setting-item">
                                <div class="setting-label">
                                    <span>Nombre del Proyecto</span>
                                    <p class="setting-desc">Identificador del proyecto actual</p>
                                </div>
                                <input type="text" id="projectName" class="input" value="Multi-Agent Hub">
                            </div>
                            <div class="setting-item">
                                <div class="setting-label">
                                    <span>Directorio de Trabajo</span>
                                    <p class="setting-desc">Ruta base para archivos del proyecto</p>
                                </div>
                                <input type="text" id="workDir" class="input" value="e:/Proyectos/TC">
                            </div>
                            <div class="setting-item">
                                <div class="setting-label">
                                    <span>Auto-sincronizaci贸n</span>
                                    <p class="setting-desc">Sincronizar estado cada N segundos</p>
                                </div>
                                <select id="syncInterval" class="select-input">
                                    <option value="0">Desactivado</option>
                                    <option value="5">5 segundos</option>
                                    <option value="10" selected>10 segundos</option>
                                    <option value="30">30 segundos</option>
                                    <option value="60">1 minuto</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <div class="setting-label">
                                    <span>Notificaciones</span>
                                    <p class="setting-desc">Alertas de nuevas tareas y handoffs</p>
                                </div>
                                <label class="toggle">
                                    <input type="checkbox" id="notificationsEnabled" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <div class="setting-label">
                                    <span>Tema Oscuro</span>
                                    <p class="setting-desc">Interfaz con tema oscuro</p>
                                </div>
                                <label class="toggle">
                                    <input type="checkbox" id="darkTheme" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- API & Integrations -->
                    <div class="panel settings-panel">
                        <div class="panel-header">
                            <h2>Integraciones</h2>
                        </div>
                        <div class="settings-content">
                            <div class="integration-item">
                                <div class="integration-header">
                                    <div class="integration-logo openai">
                                        <svg viewBox="0 0 24 24" fill="currentColor">
                                            <path
                                                d="M22.2 8.4c.3-1 .2-2.1-.3-3.1-.8-1.5-2.5-2.5-4.3-2.5-.4 0-.8 0-1.2.1C15.6 1.6 14 .5 12 .5c-2.2 0-4.2 1.3-5.1 3.3-.4-.1-.8-.1-1.2-.1-2.4 0-4.4 1.8-4.7 4.2-1.2.8-2 2.2-2 3.7 0 1.3.6 2.5 1.5 3.4-.3 1-.2 2.1.3 3.1.8 1.5 2.5 2.5 4.3 2.5.4 0 .8 0 1.2-.1.9 1.3 2.5 2 4.2 2 2.2 0 4.2-1.3 5.1-3.3.4.1.8.1 1.2.1 2.4 0 4.4-1.8 4.7-4.2 1.2-.8 2-2.2 2-3.7 0-1.3-.6-2.5-1.5-3.4z" />
                                        </svg>
                                    </div>
                                    <div class="integration-info">
                                        <h4>OpenAI API</h4>
                                        <span class="integration-status connected">Conectado</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>API Key</label>
                                    <input type="password" id="openaiKey" class="input" placeholder="sk-...">
                                </div>
                            </div>

                            <div class="integration-item">
                                <div class="integration-header">
                                    <div class="integration-logo anthropic">
                                        <svg viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M12 2L2 19h20L12 2zm0 4l7 11H5l7-11z" />
                                        </svg>
                                    </div>
                                    <div class="integration-info">
                                        <h4>Anthropic API</h4>
                                        <span class="integration-status">Desconectado</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>API Key</label>
                                    <input type="password" id="anthropicKey" class="input" placeholder="sk-ant-...">
                                </div>
                            </div>

                            <div class="integration-item">
                                <div class="integration-header">
                                    <div class="integration-logo google">
                                        <svg viewBox="0 0 24 24" fill="currentColor">
                                            <path
                                                d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                                            <path
                                                d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                                            <path
                                                d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                                            <path
                                                d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                                        </svg>
                                    </div>
                                    <div class="integration-info">
                                        <h4>Google AI (Gemini)</h4>
                                        <span class="integration-status" id="googleStatus">Desconectado</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>API Key</label>
                                    <input type="password" id="googleKey" class="input" placeholder="AIza...">
                                </div>
                            </div>

                            <div class="integration-item">
                                <div class="integration-header">
                                    <div class="integration-logo mistral">
                                        <svg viewBox="0 0 24 24" fill="currentColor">
                                            <rect x="2" y="2" width="6" height="6" />
                                            <rect x="9" y="2" width="6" height="6" />
                                            <rect x="16" y="2" width="6" height="6" />
                                            <rect x="2" y="9" width="6" height="6" />
                                            <rect x="16" y="9" width="6" height="6" />
                                            <rect x="2" y="16" width="6" height="6" />
                                            <rect x="9" y="16" width="6" height="6" />
                                            <rect x="16" y="16" width="6" height="6" />
                                        </svg>
                                    </div>
                                    <div class="integration-info">
                                        <h4>Mistral AI</h4>
                                        <span class="integration-status" id="mistralStatus">Desconectado</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>API Key</label>
                                    <input type="password" id="mistralKey" class="input" placeholder="...">
                                </div>
                            </div>

                            <div class="integration-item">
                                <div class="integration-header">
                                    <div class="integration-logo groq">
                                        <svg viewBox="0 0 24 24" fill="currentColor">
                                            <circle cx="12" cy="12" r="10" />
                                            <path d="M8 12l3 3 5-6" stroke="var(--bg-primary)" stroke-width="2"
                                                fill="none" />
                                        </svg>
                                    </div>
                                    <div class="integration-info">
                                        <h4>Groq (Ultra Fast)</h4>
                                        <span class="integration-status" id="groqStatus">Desconectado</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>API Key</label>
                                    <input type="password" id="groqKey" class="input" placeholder="gsk_...">
                                </div>
                            </div>

                            <div class="integration-item local">
                                <div class="integration-header">
                                    <div class="integration-logo ollama">
                                        <svg viewBox="0 0 24 24" fill="currentColor">
                                            <circle cx="12" cy="12" r="10" />
                                            <circle cx="12" cy="12" r="4" fill="var(--bg-primary)" />
                                        </svg>
                                    </div>
                                    <div class="integration-info">
                                        <h4>Ollama (Local)</h4>
                                        <span class="integration-status" id="ollamaStatus">Desconectado</span>
                                    </div>
                                    <button class="btn btn-sm btn-secondary"
                                        onclick="testOllamaConnection()">Probar</button>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Endpoint</label>
                                        <input type="text" id="ollamaEndpoint" class="input"
                                            value="http://localhost:11434">
                                    </div>
                                    <div class="form-group">
                                        <label>Modelo por defecto</label>
                                        <select id="ollamaDefaultModel" class="select-input">
                                            <option value="">Detectar autom谩ticamente</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="integration-item local">
                                <div class="integration-header">
                                    <div class="integration-logo lmstudio">
                                        <svg viewBox="0 0 24 24" fill="currentColor">
                                            <rect x="3" y="3" width="18" height="18" rx="3" />
                                            <path d="M8 8h8M8 12h8M8 16h5" stroke="var(--bg-primary)"
                                                stroke-width="2" />
                                        </svg>
                                    </div>
                                    <div class="integration-info">
                                        <h4>LM Studio (Local)</h4>
                                        <span class="integration-status" id="lmstudioStatus">Desconectado</span>
                                    </div>
                                    <button class="btn btn-sm btn-secondary"
                                        onclick="testLMStudioConnection()">Probar</button>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Endpoint</label>
                                        <input type="text" id="lmstudioEndpoint" class="input"
                                            value="http://localhost:1234">
                                    </div>
                                    <div class="form-group">
                                        <label>Modelo por defecto</label>
                                        <select id="lmstudioDefaultModel" class="select-input">
                                            <option value="">Detectar autom谩ticamente</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="integration-item">
                                <div class="integration-header">
                                    <div class="integration-logo github">
                                        <svg viewBox="0 0 24 24" fill="currentColor">
                                            <path
                                                d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.44 9.8 8.2 11.38.6.11.82-.26.82-.58v-2.03c-3.34.73-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.09-.75.08-.73.08-.73 1.21.08 1.85 1.24 1.85 1.24 1.07 1.84 2.81 1.31 3.5 1 .11-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.13-.3-.54-1.52.12-3.17 0 0 1.01-.32 3.3 1.23.96-.27 1.98-.4 3-.41 1.02.01 2.04.14 3 .41 2.29-1.55 3.29-1.23 3.29-1.23.66 1.65.25 2.87.12 3.17.77.84 1.24 1.91 1.24 3.22 0 4.61-2.81 5.63-5.48 5.92.43.37.81 1.1.81 2.22v3.29c0 .32.21.69.82.58C20.56 21.8 24 17.3 24 12c0-6.63-5.37-12-12-12z" />
                                        </svg>
                                    </div>
                                    <div class="integration-info">
                                        <h4>GitHub</h4>
                                        <span class="integration-status">Desconectado</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Token de Acceso</label>
                                    <input type="password" id="githubToken" class="input" placeholder="ghp_...">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Advanced Settings -->
                    <div class="panel settings-panel">
                        <div class="panel-header">
                            <h2>Configuraci贸n Avanzada</h2>
                        </div>
                        <div class="settings-content">
                            <div class="setting-item">
                                <div class="setting-label">
                                    <span>L铆mite de Tareas Paralelas</span>
                                    <p class="setting-desc">M谩ximo de tareas simult谩neas por agente</p>
                                </div>
                                <select id="parallelLimit" class="select-input">
                                    <option value="1">1 tarea</option>
                                    <option value="2">2 tareas</option>
                                    <option value="3" selected>3 tareas</option>
                                    <option value="5">5 tareas</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <div class="setting-label">
                                    <span>Nivel de Logging</span>
                                    <p class="setting-desc">Detalle del registro de actividad</p>
                                </div>
                                <select id="logLevel" class="select-input">
                                    <option value="error">Solo errores</option>
                                    <option value="warn">Advertencias</option>
                                    <option value="info" selected>Informaci贸n</option>
                                    <option value="debug">Debug</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <div class="setting-label">
                                    <span>Retenci贸n de Logs</span>
                                    <p class="setting-desc">D铆as a mantener historial</p>
                                </div>
                                <select id="logRetention" class="select-input">
                                    <option value="7">7 d铆as</option>
                                    <option value="14">14 d铆as</option>
                                    <option value="30" selected>30 d铆as</option>
                                    <option value="90">90 d铆as</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <div class="setting-label">
                                    <span>Timeout de Handoff</span>
                                    <p class="setting-desc">Tiempo m谩ximo para acknowledge</p>
                                </div>
                                <select id="handoffTimeout" class="select-input">
                                    <option value="5">5 minutos</option>
                                    <option value="15" selected>15 minutos</option>
                                    <option value="30">30 minutos</option>
                                    <option value="60">1 hora</option>
                                </select>
                            </div>
                            <div class="settings-actions">
                                <button class="btn btn-ghost" onclick="resetSettings()">Restablecer</button>
                                <button class="btn btn-secondary" onclick="exportSettings()">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4" />
                                        <polyline points="7,10 12,15 17,10" />
                                        <line x1="12" y1="15" x2="12" y2="3" />
                                    </svg>
                                    Exportar
                                </button>
                                <button class="btn btn-primary" onclick="saveSettings()">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" />
                                        <polyline points="17,21 17,13 7,13 7,21" />
                                        <polyline points="7,3 7,8 15,8" />
                                    </svg>
                                    Guardar Cambios
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- New Task Modal -->
    <div class="modal-overlay" id="taskModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Nueva Tarea</h3>
                <button class="modal-close" onclick="closeModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <form id="taskForm" class="modal-content">
                <div class="form-group">
                    <label for="taskTitle">T铆tulo</label>
                    <input type="text" id="taskTitle" class="input" placeholder="Ej: Implementar autenticaci贸n OAuth"
                        required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="taskPriority">Prioridad</label>
                        <select id="taskPriority" class="select-input">
                            <option value="high">Alta</option>
                            <option value="medium" selected>Media</option>
                            <option value="low">Baja</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="taskAssigned">Asignar a</label>
                        <select id="taskAssigned" class="select-input">
                            <option value="orquestador">Orquestador</option>
                            <option value="implementador">Implementador</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="taskContext">Contexto</label>
                    <textarea id="taskContext" class="textarea" rows="4"
                        placeholder="Descripci贸n detallada de la tarea..."></textarea>
                </div>
                <div class="form-group">
                    <label for="taskCriteria">Criterios de Aceptaci贸n</label>
                    <textarea id="taskCriteria" class="textarea" rows="3"
                        placeholder="- Criterio 1&#10;- Criterio 2&#10;- Criterio 3"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-ghost" onclick="closeModal()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Crear Tarea</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Handoff Modal -->
    <div class="modal-overlay" id="handoffModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Crear Handoff</h3>
                <button class="modal-close" onclick="closeHandoffModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <form id="handoffForm" class="modal-content">
                <input type="hidden" id="handoffTaskId">
                <div class="form-row">
                    <div class="form-group">
                        <label for="handoffFrom">De</label>
                        <select id="handoffFrom" class="select-input">
                            <option value="orquestador">Orquestador</option>
                            <option value="implementador">Implementador</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="handoffTo">A</label>
                        <select id="handoffTo" class="select-input">
                            <option value="implementador">Implementador</option>
                            <option value="orquestador">Orquestador</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="handoffSummary">Resumen</label>
                    <textarea id="handoffSummary" class="textarea" rows="2" placeholder="Breve resumen del handoff..."
                        required></textarea>
                </div>
                <div class="form-group">
                    <label for="handoffContext">Contexto Detallado</label>
                    <textarea id="handoffContext" class="textarea" rows="4"
                        placeholder="Informaci贸n importante para el agente receptor..."></textarea>
                </div>
                <div class="form-group">
                    <label for="handoffConstraints">Restricciones</label>
                    <textarea id="handoffConstraints" class="textarea" rows="2"
                        placeholder="- Restricci贸n 1&#10;- Restricci贸n 2"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-ghost" onclick="closeHandoffModal()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Crear Handoff</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="app.js"></script>
</body>

</html>